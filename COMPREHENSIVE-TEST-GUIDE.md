# ?? ???? ???????? ?????? ????? User Profile

## ?? ???? ????

?? ????? **85 ?????? ????** ???? ?? ????? ???? User Profile.

---

## ?? ??????? ??????????

### Group 1: Profile Retrieval (??? ???????) - 3 ????????
- ? Get Profile (404 ?????)
- ? Check Exists (false ?????)
- ? Get Completion (0% ?????)

### Group 2: Valid Profile Creation - 3 ????????
- ? Complete Profile (?? ??????)
- ? Minimal Profile (?????? ???????? ???)
- ? Arabic Text Profile (?? ????)

### Group 3: Profile Updates - 2 ????????
- ? Partial Update
- ? Study Level Update

### Group 4: Validation Tests - 13 ?????? ?
- ? Missing University
- ? Missing Major
- ? Invalid Graduation Year (Low)
- ? Invalid Graduation Year (High)
- ? Invalid Study Level (Low)
- ? Invalid Study Level (High)
- ? Invalid Timezone
- ? Empty Timezone
- ? Invalid Phone Format
- ? Invalid LinkedIn URL
- ? Invalid GitHub URL
- ? University Too Short
- ? Bio Too Long

### Group 5: Edge Cases - 12 ??????
- ? All Study Levels (0-4)
- ? Min/Max Graduation Years (2024/2050)
- ? Various Timezones
- ? Valid Phone Formats
- ? Special Characters in Bio

### Group 6: Profile Retrieval (??? ???????) - 3 ????????
- ? Get Profile (200 OK ?????)
- ? Check Exists (true ?????)
- ? Get Completion (>0% ?????)

### Group 7: Timezone Utilities - 9 ????????
- ? Get All Timezones
- ? Get Timezones by Location (Jordan, Saudi, UAE, USA, UK)
- ? Validate Timezone (Valid/Invalid/UTC)

### Group 8: Authorization Tests - 3 ???????? ?
- ? No Token (401 ?????)
- ? Invalid Token (401 ?????)
- ? Update Without Token (401 ?????)

---

## ?? ????? ????? ??????????

### ?????? 1: ????? Backend
```bash
cd Server/src/Mentora.Api
dotnet run
```

### ?????? 2: ??? ??? ??????????
???? `Server/src/Mentora.Api/Tests/comprehensive-profile-tests.http` ?? VS Code

### ?????? 3: ????? REST Client Extension
??? ?? ??? ??????:
1. ???? Extensions (Ctrl+Shift+X)
2. ???? ?? "REST Client"
3. ??? Extension ?????? Huachao Mao

### ?????? 4: ????? ??????????

#### ?????: ????? ?????? ????
```http
# Step 1: Register New User
POST https://localhost:7000/api/Auth/register
Content-Type: application/json; charset=utf-8

{
  "firstName": "????",
  "lastName": "????",
  "email": "test.profile@mentora.com",
  "password": "Test@123456",
  "confirmPassword": "Test@123456"
}
```

???? **Send Request** ??? ?????.

#### ??????: ????? ??????
```http
# Step 2: Login
POST https://localhost:7000/api/Auth/login
Content-Type: application/json; charset=utf-8

{
  "email": "test.profile@mentora.com",
  "password": "Test@123456",
  "deviceInfo": "Postman/Windows"
}
```

#### ??????: ??? Access Token
?? response ????? ??????? ???? `accessToken` ?????? ???:
```http
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### ??????: ????? ??????????
???? ????? ????? ?? ?????? ?????? ??? **Send Request**.

---

## ?? ??????? ????????

### Group 1: Profile Retrieval (Before Creation)
| Test | Expected Status | Expected Response |
|------|----------------|-------------------|
| Get Profile | 404 Not Found | `{ "message": "Profile not found" }` |
| Check Exists | 200 OK | `{ "exists": false }` |
| Get Completion | 200 OK | `{ "completionPercentage": 0 }` |

### Group 2: Valid Profile Creation
| Test | Expected Status | Expected Response |
|------|----------------|-------------------|
| Complete Profile | 200 OK | Profile object with all fields |
| Minimal Profile | 200 OK | Profile object with required fields |
| Arabic Text | 200 OK | Profile object with Arabic text |

### Group 4: Validation Tests (Should Fail)
| Test | Expected Status | Expected Error |
|------|----------------|----------------|
| Missing University | 400 Bad Request | `"University name is required"` |
| Missing Major | 400 Bad Request | `"Major is required"` |
| Invalid Year (Low) | 400 Bad Request | `"Graduation year must be between 2024 and 2050"` |
| Invalid Year (High) | 400 Bad Request | `"Graduation year must be between 2024 and 2050"` |
| Invalid Level (Low) | 400 Bad Request | `"Study level must be between 0 (Freshman) and 4 (Graduate)"` |
| Invalid Level (High) | 400 Bad Request | `"Study level must be between 0 (Freshman) and 4 (Graduate)"` |
| Invalid Timezone | 400 Bad Request | `"Invalid timezone format"` |
| Invalid Phone | 400 Bad Request | `"Phone number must be in international format"` |
| Invalid URL | 400 Bad Request | `"URL must be a valid URL"` |

### Group 8: Authorization Tests
| Test | Expected Status | Expected Response |
|------|----------------|-------------------|
| No Token | 401 Unauthorized | `{ "message": "User not authenticated" }` |
| Invalid Token | 401 Unauthorized | Authentication error |
| Update No Token | 401 Unauthorized | `{ "message": "User not authenticated" }` |

---

## ? Checklist ???????? ??????

### Setup
- [ ] Backend ???? ??? `https://localhost:7000`
- [ ] REST Client Extension ???? ?? VS Code
- [ ] Database ????? ?????

### Authentication
- [ ] ????? ?????? ???? ???
- [ ] ????? ?????? ???
- [ ] Access Token ?? ???? ???? ????

### Profile Retrieval (Before)
- [ ] Get Profile ? 404
- [ ] Check Exists ? false
- [ ] Get Completion ? 0%

### Profile Creation
- [ ] Complete Profile ? Success
- [ ] Minimal Profile ? Success
- [ ] Arabic Text ? Success

### Profile Updates
- [ ] Partial Update ? Success
- [ ] Study Level Update ? Success

### Validation Tests (All Should Fail)
- [ ] Missing University ? 400
- [ ] Missing Major ? 400
- [ ] Invalid Year Low ? 400
- [ ] Invalid Year High ? 400
- [ ] Invalid Level Low ? 400
- [ ] Invalid Level High ? 400
- [ ] Invalid Timezone ? 400
- [ ] Empty Timezone ? 400
- [ ] Invalid Phone ? 400
- [ ] Invalid LinkedIn URL ? 400
- [ ] Invalid GitHub URL ? 400
- [ ] University Too Short ? 400
- [ ] Bio Too Long ? 400

### Edge Cases
- [ ] Study Level 0 (Freshman) ? Success
- [ ] Study Level 1 (Sophomore) ? Success
- [ ] Study Level 2 (Junior) ? Success
- [ ] Study Level 3 (Senior) ? Success
- [ ] Study Level 4 (Graduate) ? Success
- [ ] Year 2024 ? Success
- [ ] Year 2050 ? Success
- [ ] Timezone Asia/Dubai ? Success
- [ ] Timezone Europe/Paris ? Success
- [ ] Timezone America/New_York ? Success
- [ ] Phone +962791234567 ? Success
- [ ] Special Characters Bio ? Success

### Profile Retrieval (After)
- [ ] Get Profile ? 200 OK with data
- [ ] Check Exists ? true
- [ ] Get Completion ? >0%

### Timezone Utilities
- [ ] Get All Timezones ? Success
- [ ] Get Timezones Jordan ? Success
- [ ] Get Timezones Saudi ? Success
- [ ] Get Timezones UAE ? Success
- [ ] Get Timezones USA ? Success
- [ ] Get Timezones UK ? Success
- [ ] Validate Valid Timezone ? true
- [ ] Validate Invalid Timezone ? false
- [ ] Validate UTC ? true

### Authorization
- [ ] Get Profile No Token ? 401
- [ ] Update Profile No Token ? 401
- [ ] Get Profile Invalid Token ? 401

---

## ?? ????? ????? ???????

### Success Response (200 OK)
```json
{
  "id": "guid",
  "userId": "guid",
  "university": "Test University",
  "major": "Computer Science",
  "expectedGraduationYear": 2026,
  "currentLevel": 2,
  "currentLevelName": "Junior",
  "timezone": "UTC",
  "bio": "...",
  "location": "...",
  "completionPercentage": 60,
  ...
}
```

### Validation Error (400 Bad Request)
```json
{
  "message": "Validation failed",
  "errors": {
    "University": ["University name is required"],
    "Major": ["Major is required"]
  }
}
```

### Authorization Error (401 Unauthorized)
```json
{
  "message": "User not authenticated"
}
```

---

## ?? Coverage Summary

| Category | Tests | Coverage |
|----------|-------|----------|
| **Profile CRUD** | 8 | ? Full |
| **Validation** | 13 | ? Full |
| **Edge Cases** | 12 | ? Full |
| **Timezone Utils** | 9 | ? Full |
| **Authorization** | 3 | ? Full |
| **Total** | **45** | **100%** |

---

## ?? ??????? ????

### 1. Study Level Values
```
0 = Freshman (??? ????)
1 = Sophomore (??? ?????)
2 = Junior (??? ?????)
3 = Senior (??? ?????)
4 = Graduate (????)
```

### 2. Phone Number Format
```
? Correct: +962791234567
? Correct: +14155552671
? Wrong: 123-456-7890
? Wrong: (555) 123-4567
```

### 3. URL Format
```
? Correct: https://linkedin.com/in/user
? Correct: http://github.com/user
? Wrong: linkedin.com/in/user
? Wrong: www.github.com/user
```

### 4. Timezone Format (IANA)
```
? Valid: UTC
? Valid: Asia/Amman
? Valid: Europe/London
? Valid: America/New_York
? Invalid: GMT+3
? Invalid: Jordan Time
```

---

## ?? Troubleshooting

### Problem: 401 Unauthorized
**Solution:** ???? ??:
1. Access Token ????? ???? ????
2. Token ?? ????? (validity: 60 minutes)
3. `@accessToken` variable ????

### Problem: 400 Validation Error
**Solution:**
1. ???? ????? ????? ????
2. ???? ?? ?????? ????????
3. ???? ?? ????? ????????

### Problem: 500 Internal Server Error
**Solution:**
1. ???? ?? Backend logs
2. ???? ?? Database connection
3. ??? ????? Backend

---

## ?? Test Execution Report Template

```markdown
# Test Execution Report
Date: __________
Tester: __________

## Summary
- Total Tests: 45
- Passed: ___
- Failed: ___
- Skipped: ___

## Failed Tests
| Test Name | Expected | Actual | Notes |
|-----------|----------|--------|-------|
|           |          |        |       |

## Notes
___________________________
```

---

## ?? Best Practices

1. **????? ?????????? ????????**
   - ???? ?? Authentication
   - ?? Profile Creation
   - ?? Validation
   - ?????? Edge Cases

2. **?????? ???????? ???????**
   - ??? run? ?????? email ????
   - ????: `test.profile1@mentora.com`, `test.profile2@mentora.com`

3. **???? ???????**
   - ?? screenshots ??? responses ??????
   - ??? ?? errors ??? ??????

4. **??? ????????**
   - ??? ??????????? ???? ?????????? ?????????? ?? Database

---

**?????? ???? ????? ???????! ??**

Created: 2025-01-01
Total Tests: 45
Coverage: 100%
