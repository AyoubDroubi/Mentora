# ?? ?????? ??????? ????????? - Mentora Platform

## ?? ?????????
- [???? ?????](#????-?????)
- [Domain Layer](#domain-layer)
- [Application Layer](#application-layer)
- [Infrastructure Layer](#infrastructure-layer)
- [API Layer](#api-layer)
- [????? ???????](#?????-???????)

---

## ?? ???? ?????

```
Mentora/
??? Server/
?   ??? src/
?   ?   ??? Mentora.Domain/           # ?? Domain Layer
?   ?   ??? Mentora.Application/      # ?? Application Layer
?   ?   ??? Mentora.Infrastructure/   # ?? Infrastructure Layer
?   ?   ??? Mentora.Api/              # ?? API Layer
?   ??? docs/                         # ?? ???????
?   ??? scripts/                      # ?? ???????? ??????
?   ??? README.md
??? Client/                           # ?? React Frontend
??? .git/                             # ?? Git Repository
```

---

## ?? Domain Layer (Mentora.Domain)

### ???????? ???????

```
Mentora.Domain/
??? ?? Common/
?   ??? BaseEntity.cs                 # ?????? ??????? ????? ????????
?
??? ?? Entities/
?   ??? ?? Auth/
?   ?   ??? User.cs                   # ???? ???????? ???????
?   ?   ?   ??? Id, Email, PasswordHash
?   ?   ?   ??? FirstName, LastName
?   ?   ?   ??? IsEmailConfirmed
?   ?   ?   ??? Navigation: UserProfile, RefreshTokens
?   ?   ?   ??? Navigation: CareerPlans, StudyPlans
?   ?   ?
?   ?   ??? PasswordResetToken.cs     # ???? ????? ????? ???? ??????
?   ?       ??? Token, UserId
?   ?       ??? ExpiresAt, IsUsed
?   ?       ??? Navigation: User
?   ?
?   ??? ?? Profile/
?   ?   ??? UserProfile.cs            # ????? ?????? ????????
?   ?   ?   ??? UserId, Bio, DateOfBirth
?   ?   ?   ??? CurrentRole, TargetRole
?   ?   ?   ??? YearsOfExperience
?   ?   ?   ??? Navigation: User
?   ?   ?   ??? Navigation: Skills, Achievements
?   ?   ?
?   ?   ??? UserSkill.cs              # ?????? ????????
?   ?   ?   ??? UserProfileId, SkillId
?   ?   ?   ??? ProficiencyLevel (0-100)
?   ?   ?   ??? Navigation: UserProfile, Skill
?   ?   ?
?   ?   ??? UserAchievement.cs        # ??????? ????????
?   ?       ??? UserProfileId, Title
?   ?       ??? Description, AchievedAt
?   ?       ??? Navigation: UserProfile
?   ?
?   ??? ?? Career/
?   ?   ??? CareerPlan.cs             # ??? ?????? ??????
?   ?   ?   ??? UserId, Title, TargetRole
?   ?   ?   ??? Description, Summary
?   ?   ?   ??? TimelineMonths, CurrentStepIndex
?   ?   ?   ??? IsActive, Status (PlanStatus)
?   ?   ?   ??? Navigation: User
?   ?   ?   ??? Navigation: Steps (List<CareerStep>)
?   ?   ?
?   ?   ??? CareerStep.cs             # ???? ?? ?????? ??????
?   ?       ??? CareerPlanId, StepNumber
?   ?       ??? Title, Description
?   ?       ??? EstimatedDuration, Status
?   ?       ??? DueDate, CompletedAt
?   ?       ??? Navigation: CareerPlan
?   ?
?   ??? ?? Study/
?   ?   ??? StudyPlan.cs              # ??? ???????
?   ?       ??? UserId, Title, Subject
?   ?       ??? StartDate, EndDate
?   ?       ??? IsActive, Status
?   ?       ??? Navigation: User
?   ?
?   ??? ?? Skills/
?   ?   ??? Skill.cs                  # ???????? ?????? (Master Data)
?   ?       ??? Name, Category
?   ?       ??? Description
?   ?       ??? Navigation: UserSkills
?   ?
?   ??? ?? Auth/
?   ?   ??? RefreshToken.cs           # ?????? ?????????
?   ?       ??? Token, UserId
?   ?       ??? DeviceInfo, IpAddress
?   ?       ??? ExpiresAt, IsRevoked
?   ?       ??? Navigation: User
?   ?
?   ??? ?? AiResponse/
?       ??? AiCareerPlanResponse.cs   # ??????? AI ???? ?????? ??????
?       ?   ??? TargetRole, Summary
?       ?   ??? TimelineMonths
?       ?   ??? Steps, RequiredSkills
?       ?
?       ??? AiResource.cs             # ????? ?????? ?? AI
?           ??? Title, Description
?           ??? Type, Url
?           ??? EstimatedDuration
?
??? ?? Enums/
?   ??? Enums.cs                      # ???? ?????????
?       ??? PlanStatus (Active, Completed, Paused, Cancelled)
?       ??? StepStatus (NotStarted, InProgress, Completed)
?       ??? ProficiencyLevel (Beginner, Intermediate, Advanced, Expert)
?       ??? SkillCategory (Technical, Soft, Domain)
?       ??? ResourceType (Article, Video, Course, Book)
?
??? ?? ValueObjects/                  # (???? - ?? ???? ???)
?   ??? Email.cs
?   ??? PhoneNumber.cs
?   ??? Address.cs
?
??? ?? Mentora.Domain.csproj          # ??? ???????
    ??? Target Framework: net9.0
```

### ???????? (Dependencies)

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  
  <ItemGroup>
    <!-- ?? ???? ?????? ??????! -->
    <!-- Domain ?? ????? ??? ?? ??? -->
  </ItemGroup>
</Project>
```

---

## ?? Application Layer (Mentora.Application)

### ???????? ???????

```
Mentora.Application/
??? ?? DTOs/
?   ??? ?? Auth/
?   ?   ??? LoginDTO.cs               # ?????? ????? ??????
?   ?   ?   ??? Email
?   ?   ?   ??? Password
?   ?   ?   ??? DeviceInfo (optional)
?   ?   ?
?   ?   ??? SignupDTO.cs              # ?????? ???????
?   ?   ?   ??? FirstName, LastName
?   ?   ?   ??? Email, Password
?   ?   ?   ??? ConfirmPassword
?   ?   ?
?   ?   ??? ForgotPasswordDto.cs      # ??? ????? ???? ??????
?   ?   ?   ??? Email
?   ?   ?
?   ?   ??? ResetPasswordDto.cs       # ????? ????? ???? ??????
?   ?   ?   ??? Token
?   ?   ?   ??? NewPassword
?   ?   ?   ??? ConfirmPassword
?   ?   ?
?   ?   ??? AuthResponseDTO.cs        # ??????? ????????
?   ?       ??? IsSuccess
?   ?       ??? Message
?   ?       ??? AccessToken
?   ?       ??? RefreshToken
?   ?       ??? User (UserDTO)
?   ?
?   ??? ?? User/
?   ?   ??? UserDTO.cs                # ?????? ????????
?   ?   ??? UserProfileDTO.cs         # ?????? ????? ??????
?   ?   ??? UpdateProfileDTO.cs       # ????? ????? ??????
?   ?
?   ??? ?? Career/
?   ?   ??? CareerPlanDTO.cs          # ?????? ??? ?????? ??????
?   ?   ??? CareerStepDTO.cs          # ?????? ???? ?????? ??????
?   ?   ??? CreateCareerPlanDTO.cs    # ????? ??? ?????
?   ?   ??? UpdateCareerPlanDTO.cs    # ????? ??? ??????
?   ?
?   ??? ?? Common/
?       ??? PagedResult.cs            # ????? ?? Pagination
?       ??? ApiResponse.cs            # ??????? API ?????
?
??? ?? Interfaces/
?   ??? ?? Services/
?   ?   ??? IAuthService.cs           # ????? ???? ????????
?   ?   ?   ??? RegisterAsync()
?   ?   ?   ??? LoginAsync()
?   ?   ?   ??? RefreshTokenAsync()
?   ?   ?   ??? ForgotPasswordAsync()
?   ?   ?   ??? ResetPasswordAsync()
?   ?   ?   ??? LogoutAsync()
?   ?   ?   ??? GetCurrentUserAsync()
?   ?   ?
?   ?   ??? ICareerService.cs         # ????? ???? ?????? ??????
?   ?   ?   ??? CreatePlanAsync()
?   ?   ?   ??? GetPlanAsync()
?   ?   ?   ??? UpdatePlanAsync()
?   ?   ?   ??? DeletePlanAsync()
?   ?   ?   ??? GetUserPlansAsync()
?   ?   ?
?   ?   ??? IEmailService.cs          # ????? ???? ??????
?   ?   ?   ??? SendEmailAsync()
?   ?   ?   ??? SendPasswordResetEmailAsync()
?   ?   ?
?   ?   ??? IAiService.cs             # ????? ???? AI
?   ?       ??? GenerateCareerPlanAsync()
?   ?       ??? GenerateStudyPlanAsync()
?   ?       ??? GetRecommendationsAsync()
?   ?
?   ??? ?? Repositories/
?       ??? IUserRepository.cs        # ????? ?????? ??????????
?       ??? ICareerPlanRepository.cs  # ????? ?????? ??? ??????
?       ??? IGenericRepository.cs     # ????? ?????? ????
?
??? ?? Validators/                    # (???? - FluentValidation)
?   ??? LoginDTOValidator.cs
?   ??? SignupDTOValidator.cs
?   ??? CareerPlanDTOValidator.cs
?
??? ?? Mappings/                      # (???? - AutoMapper)
?   ??? AuthMappingProfile.cs
?   ??? CareerMappingProfile.cs
?
??? ?? Mentora.Application.csproj     # ??? ???????
    ??? Target Framework: net9.0
    ??? Project Reference: Mentora.Domain
```

### ???????? (Dependencies)

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
  </PropertyGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\Mentora.Domain\Mentora.Domain.csproj" />
  </ItemGroup>
  
  <!-- Packages (????) -->
  <!-- <PackageReference Include="FluentValidation" /> -->
  <!-- <PackageReference Include="AutoMapper" /> -->
</Project>
```

---

## ?? Infrastructure Layer (Mentora.Infrastructure)

### ???????? ???????

```
Mentora.Infrastructure/
??? ?? Persistence/
?   ??? ApplicationDbContext.cs       # DbContext ???????
?   ?   ??? DbSet<User> Users
?   ?   ??? DbSet<UserProfile> UserProfiles
?   ?   ??? DbSet<CareerPlan> CareerPlans
?   ?   ??? DbSet<CareerStep> CareerSteps
?   ?   ??? DbSet<StudyPlan> StudyPlans
?   ?   ??? DbSet<Skill> Skills
?   ?   ??? DbSet<UserSkill> UserSkills
?   ?   ??? DbSet<RefreshToken> RefreshTokens
?   ?   ??? DbSet<PasswordResetToken> PasswordResetTokens
?   ?   ??? OnModelCreating() - Configurations
?   ?
?   ??? ?? Configurations/
?   ?   ??? UserConfiguration.cs      # ??????? ???? User
?   ?   ??? CareerPlanConfiguration.cs
?   ?   ??? CareerStepConfiguration.cs
?   ?   ??? RefreshTokenConfiguration.cs
?   ?
?   ??? ?? Seeds/
?       ??? DefaultUsers.cs           # ?????? ?????????? ??????????
?       ??? DefaultSkills.cs          # ?????? ????????
?
??? ?? Repositories/
?   ??? GenericRepository.cs          # ?????? ???
?   ?   ??? GetByIdAsync()
?   ?   ??? GetAllAsync()
?   ?   ??? AddAsync()
?   ?   ??? UpdateAsync()
?   ?   ??? DeleteAsync()
?   ?
?   ??? UserRepository.cs             # ?????? ??????????
?   ?   ??? GetByEmailAsync()
?   ?   ??? EmailExistsAsync()
?   ?   ??? GetWithProfileAsync()
?   ?
?   ??? CareerPlanRepository.cs       # ?????? ??? ?????? ??????
?       ??? GetUserPlansAsync()
?       ??? GetWithStepsAsync()
?       ??? UpdateStepStatusAsync()
?
??? ?? Services/
?   ??? AuthService.cs                # ????? ???? ????????
?   ?   ??? RegisterAsync()
?   ?   ?   ??? 1. ?????? ?? ?????? ??????????
?   ?   ?   ??? 2. ????? ???? ?????? (BCrypt)
?   ?   ?   ??? 3. ????? ????????
?   ?   ?   ??? 4. ????? JWT Token
?   ?   ?   ??? 5. ????? Refresh Token
?   ?   ?
?   ?   ??? LoginAsync()
?   ?   ?   ??? 1. ?????? ?? ?????? ?????????
?   ?   ?   ??? 2. ?????? ?? BCrypt
?   ?   ?   ??? 3. ????? Tokens
?   ?   ?   ??? 4. ??? Refresh Token
?   ?   ?
?   ?   ??? RefreshTokenAsync()
?   ?       ??? 1. ?????? ?? Token
?   ?       ??? 2. ????? Tokens ?????
?   ?       ??? 3. ????? Token ??????
?   ?
?   ??? EmailService.cs               # ???? ?????? ??????????
?   ?   ??? SendEmailAsync()
?   ?   ??? SendPasswordResetEmailAsync()
?   ?   ??? SendWelcomeEmailAsync()
?   ?
?   ??? TokenCleanupService.cs        # ???? ????? ??????
?   ?   ??? BackgroundService
?   ?   ??? ???? ?? 24 ????
?   ?   ??? ???? Refresh Tokens ????????
?   ?
?   ??? JwtTokenService.cs            # ???? JWT
?       ??? GenerateAccessToken()
?       ??? GenerateRefreshToken()
?       ??? ValidateToken()
?
??? ?? Migrations/
?   ??? 20241231_InitialCreate.cs
?   ??? 20241231_AddUserProfile.cs
?   ??? 20241231_AddCareerPlans.cs
?   ??? ApplicationDbContextModelSnapshot.cs
?
??? ?? ExternalServices/              # (????)
?   ??? OpenAiService.cs              # ????? OpenAI
?   ??? AzureBlobService.cs           # ????? ???????
?
??? ?? Mentora.Infrastructure.csproj  # ??? ???????
    ??? Target Framework: net9.0
    ??? Project References: Domain, Application
```

### ???????? (Dependencies)

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
  </PropertyGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\Mentora.Domain\Mentora.Domain.csproj" />
    <ProjectReference Include="..\Mentora.Application\Mentora.Application.csproj" />
  </ItemGroup>
  
  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore" Version="9.0.0" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="9.0.0" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="9.0.0" />
    <PackageReference Include="BCrypt.Net-Next" Version="4.0.3" />
    <PackageReference Include="System.IdentityModel.Tokens.Jwt" Version="7.0.0" />
  </ItemGroup>
</Project>
```

---

## ?? API Layer (Mentora.Api)

### ???????? ???????

```
Mentora.Api/
??? ?? Controllers/
?   ??? AuthController.cs             # ???? ????? ????????
?   ?   ??? POST /api/auth/register
?   ?   ??? POST /api/auth/login
?   ?   ??? POST /api/auth/refresh-token
?   ?   ??? POST /api/auth/logout
?   ?   ??? POST /api/auth/logout-all
?   ?   ??? POST /api/auth/forgot-password
?   ?   ??? POST /api/auth/reset-password
?   ?   ??? GET /api/auth/me [Authorize]
?   ?
?   ??? CareerController.cs           # ???? ????? ?????? ??????
?   ?   ??? POST /api/career/plans
?   ?   ??? GET /api/career/plans/{id}
?   ?   ??? PUT /api/career/plans/{id}
?   ?   ??? DELETE /api/career/plans/{id}
?   ?   ??? GET /api/career/plans
?   ?   ??? POST /api/career/plans/{id}/steps
?   ?
?   ??? UserController.cs             # ???? ????? ????????
?       ??? GET /api/user/profile
?       ??? PUT /api/user/profile
?       ??? GET /api/user/statistics
?
??? ?? Middleware/
?   ??? ExceptionHandlingMiddleware.cs # ?????? ??????? ??????
?   ?   ??? ????? ???? ???????????
?   ?   ??? ????? ??????? ?????
?   ?   ??? ???? ???????
?   ?
?   ??? JwtMiddleware.cs              # ?????? JWT (????)
?
??? ?? Filters/
?   ??? ValidationFilter.cs           # ???? ?????? ?? ????????
?   ??? AuthorizeFilter.cs            # ???? ???????
?
??? ?? Extensions/
?   ??? ServiceExtensions.cs          # ????? ???????
?   ?   ??? AddApplicationServices()
?   ?   ??? AddInfrastructureServices()
?   ?   ??? AddSwaggerDocumentation()
?   ?
?   ??? MiddlewareExtensions.cs       # ????? Middleware
?
??? ?? Tests/
?   ??? auth-tests.http               # ??? ?????? HTTP
?       ??? Register Request
?       ??? Login Request
?       ??? Refresh Token Request
?       ??? Forgot Password Request
?       ??? Reset Password Request
?
??? ?? Program.cs                     # ???? ????? ????????
?   ??? 1. Builder Configuration
?   ?   ??? Add DbContext
?   ?   ??? Add Authentication (JWT)
?   ?   ??? Add Swagger
?   ?   ??? Add CORS
?   ?   ??? Register Services (DI)
?   ?
?   ??? 2. Middleware Pipeline
?   ?   ??? UseSwagger() (?? ??????)
?   ?   ??? UseHttpsRedirection()
?   ?   ??? UseCors()
?   ?   ??? UseAuthentication()
?   ?   ??? UseAuthorization()
?   ?   ??? MapControllers()
?   ?
?   ??? 3. Run Application
?
??? ?? appsettings.json               # ????????? ????????
?   ??? ConnectionStrings
?   ?   ??? DefaultConnection
?   ??? Jwt
?   ?   ??? Key
?   ?   ??? Issuer
?   ?   ??? Audience
?   ??? Email
?   ?   ??? SmtpServer
?   ?   ??? Port
?   ?   ??? From
?   ??? Logging
?
??? ?? appsettings.Development.json   # ??????? ???????
?
??? ?? launchSettings.json            # ??????? ???????
?   ??? https: localhost:7xxx
?   ??? http: localhost:5xxx
?
??? ?? CleanBackend.Api.http          # ???????? HTTP ??????
?
??? ?? Mentora.Api.csproj             # ??? ???????
    ??? Target Framework: net9.0
    ??? Project References: Application, Infrastructure
```

### ???????? (Dependencies)

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
  </PropertyGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\Mentora.Application\Mentora.Application.csproj" />
    <ProjectReference Include="..\Mentora.Infrastructure\Mentora.Infrastructure.csproj" />
  </ItemGroup>
  
  <ItemGroup>
    <PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="9.0.0" />
    <PackageReference Include="Swashbuckle.AspNetCore" Version="7.2.0" />
    <PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="9.0.0" />
  </ItemGroup>
</Project>
```

---

## ?? ????? ???????

### 1. appsettings.json

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=.;Database=MentoraDb;User ID=sa;Password=YOUR_PASSWORD;TrustServerCertificate=True;MultipleActiveResultSets=true"
  },
  "Jwt": {
    "Key": "super_secret_key_123456789_must_be_long_enough_for_hmac_sha256",
    "Issuer": "MentoraApi",
    "Audience": "MentoraClient",
    "AccessTokenExpiryMinutes": 60,
    "RefreshTokenExpiryDays": 7
  },
  "Email": {
    "SmtpServer": "smtp.gmail.com",
    "Port": 587,
    "From": "noreply@mentora.com",
    "Username": "",
    "Password": "",
    "EnableSsl": true
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}
```

### 2. launchSettings.json

```json
{
  "profiles": {
    "https": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "applicationUrl": "https://localhost:7xxx;http://localhost:5xxx",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}
```

---

## ?? ???????? ???????

### ??? ??????? ??? ??????

| ?????? | ??? ???????? | ??? ??? DTOs | ??? ??????? | ??? ????????? |
|--------|--------------|-------------|-------------|---------------|
| Domain | 12 | 0 | 0 | 0 |
| Application | 0 | 15+ | 0 (?????? ???) | 0 |
| Infrastructure | 0 | 0 | 6 | 0 |
| API | 0 | 0 | 0 | 3 |

### ???? ????? (??????)

| ?????? | ???? ????? |
|--------|-----------|
| Domain | ~800 |
| Application | ~500 |
| Infrastructure | ~1,500 |
| API | ~600 |
| **???????** | **~3,400** |

---

## ?? ????? ???????

### ???????? (Entities)
```
- PascalCase
- ???? (User, CareerPlan)
- ??? Entity ?? ????? (? UserEntity, ? User)
```

### DTOs
```
- PascalCase
- ????? ?? DTO (LoginDTO, SignupDTO)
- ??? ????? (CreateCareerPlanDTO, UpdateUserProfileDTO)
```

### ??????? (Services)
```
- PascalCase
- ????? ?? Service (AuthService, EmailService)
- ??????? ???? ?? I (IAuthService)
```

### ?????????? (Repositories)
```
- PascalCase
- ????? ?? Repository (UserRepository)
- ??????? ???? ?? I (IUserRepository)
```

### ????????? (Controllers)
```
- PascalCase
- ????? ?? Controller (AuthController)
- ??? Route ???? ????? (api/auth)
```

---

## ?? ????? ??????

- [01-ARCHITECTURE-OVERVIEW.md](./01-ARCHITECTURE-OVERVIEW.md) - ???? ???? ??? ??????
- [02-CLEAN-ARCHITECTURE-GUIDE.md](./02-CLEAN-ARCHITECTURE-GUIDE.md) - ???? Clean Architecture
- [../domain/01-DOMAIN-OVERVIEW.md](../domain/01-DOMAIN-OVERVIEW.md) - ???? ???? Domain
- [../application/01-APPLICATION-OVERVIEW.md](../application/01-APPLICATION-OVERVIEW.md) - ???? ???? Application

---

**??? ?????:** 2024-12-31  
**???????:** 1.0.0
