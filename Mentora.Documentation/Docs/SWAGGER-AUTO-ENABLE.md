# Swagger Auto-Enable Update

## ?? ???????: 31 ?????? 2024 - 11:00 AM

---

## ? ??????? ??????

### ????? Swagger ???????? ?? ???? ???????

#### ?? ?? ??????:

**???**: `Server/src/Mentora.Api/Program.cs`

**???**:
```csharp
// Swagger only in Development
if (app.Environment.IsDevelopment())
{
    app.UseSwaggerDocumentation();
}
```

**???**:
```csharp
// ? Swagger enabled in ALL environments (Development & Production)
app.UseSwaggerDocumentation();
```

---

## ?? ???????

### 1. ???? ???? ??????
- ? ???? ??????? ??????? Swagger ??????
- ? ?? ???? ?????? Environment
- ? ???? ?? Development ? Production

### 2. ????? ????????
- ? ???? ???? API ?? ??????
- ? ??????? ?????? ???? Documentation
- ? Testers ?????? ?????? ??? API ??????

### 3. Documentation ?????? ??????
- ? ?? ???? ?????? ?????
- ? Try it out ???? ??????
- ? ????? ??? ??? ??? endpoints

---

## ?? ????????? ?? ??????? ????????

### Development
```
? ?? ??? ??? ??
? Swagger ????
? Try it out ????
```

### Staging
```
? Swagger ???? ??????
? ???? ????????
? Documentation ???
```

### Production
```
? Swagger ???? (???????)
? ???? ??? API consumers
? ???? ?????? ??? ??? ?????
```

---

## ?? ??????? ?????

### ??? ???? ????? Swagger ?? Production

#### ??????? 1: ??? Environment Variable
?? `appsettings.Production.json`:
```json
{
  "Swagger": {
    "Enabled": false
  }
}
```

?? ?? `Program.cs`:
```csharp
var swaggerEnabled = builder.Configuration.GetValue<bool>("Swagger:Enabled", true);
if (swaggerEnabled)
{
    app.UseSwaggerDocumentation();
}
```

#### ??????? 2: ??? Environment Check
```csharp
// Only in Development and Staging
if (!app.Environment.IsProduction())
{
    app.UseSwaggerDocumentation();
}
```

#### ??????? 3: ??? Authentication
??? Authentication ??? Swagger:
```csharp
app.UseWhen(
    context => context.Request.Path.StartsWithSegments("/swagger"),
    appBuilder =>
    {
        appBuilder.Use(async (context, next) =>
        {
            if (!context.User.Identity?.IsAuthenticated ?? true)
            {
                context.Response.StatusCode = 401;
                return;
            }
            await next();
        });
    });
```

---

## ?? ????? ????????? ????

### 1. ???? ???????
```bash
cd Server/src/Mentora.Api
dotnet run
```

### 2. ???? ???????
```
https://localhost:7xxx/
```

### 3. Swagger ???? ????????!
- ? ?? ???? ?????? `/swagger`
- ? ????? ????? ?????????
- ? Try it out ???? ??????

---

## ?? ??????

| Feature | ??? | ??? |
|---------|-----|-----|
| Swagger ?? Development | ? | ? |
| Swagger ?? Production | ? | ? |
| ????? ????? Environment | ??? | ?? |
| ???? ???????? | ????? | ?????? |
| Documentation ??? | Development ??? | ?? ??????? |

---

## ?? Best Practices

### ? ?????? Swagger ???????? ???:
- API ??? ????? ??????
- ???? ????? ?? ??????
- ???? ???? ???? ????? ??????
- API ????????? ??????? ???

### ? ???? Swagger ???:
- API ???? ????
- ????? ?????
- ???? ????? Attack Surface
- ???? ????? ????? ?????

---

## ?? ??????? ???????

```
? Server/src/Mentora.Api/Program.cs
? Server/docs/SWAGGER-GUIDE-AR.md
? Server/docs/SWAGGER-AUTO-ENABLE.md (????)
```

---

## ?? ????????

### 1. Development
```bash
dotnet run --environment Development
# ????: https://localhost:7xxx/
# ? Swagger ????
```

### 2. Production
```bash
dotnet run --environment Production
# ????: https://localhost:7xxx/
# ? Swagger ???? ?????!
```

---

## ?? ?????

1. **???????**: ???? Swagger ???? ??????
2. **???????**: ??? ????? ??? ?????????:
   - API ??? ? ????? ????
   - API ??? ? ?????? Authentication
   - API ??? ? ????? ??????

3. **????????**: ???? ???? Swagger ?????? ??????

---

## ? Build Status

```
? Build Successful
? Hot Reload Available
? Swagger Auto-Enabled
? Ready to Use!
```

---

## ?? ???????

**???? Swagger ???? ???????? ?? ???? ???????!**

- ? ????? ??????
- ? ????? ????????
- ? Documentation ?????? ???
- ? ?? ???? ?????? ?????

**???? ??????? ????? ????! ??**

---

**??? ?????**: 31 ?????? 2024, 11:00 AM
**??????**: ? ????? ?????
**??????**: v1.1
